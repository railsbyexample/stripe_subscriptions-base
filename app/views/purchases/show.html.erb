<h1>Purchase <%= @product.name %></h1>

<%= form_with url: product_purchase_path(@product), local: true,
      id: 'payment-form',
      data: { payment_intent_id: @payment_intent.client_secret } do |form| %>
  <div class="form-group">
    <label for="card-element"></label>
    <div id="card-element" class="form-control"></div>
    <div id="card-errors" role="alert"></div>
  </div>

  <div class="form-group">
    <label for="">Name on card</label>
    <%= form.text_field :name_on_card, placeholder: 'Full name', class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= form.hidden_field :payment_intent_id, value: @payment_intent.id %>
    <button class="btn btn-primary">Submit Payment</button>
  </div>
<% end %>
